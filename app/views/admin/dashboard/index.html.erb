<div class="row">
  <div class="twelve columns">
    <div class="wrapper light">
      <div class="row">
        <h2 class="centalign">Admin Dashboard</h2>
        <section class="tabs">
          <div class="row">
            <div class="twelve columns centered centalign">
              <ul class="tab-nav">
                  <li class="active"><a href="#">Grants</a></li>
                  <li><a href="#">Donors</a></li>
                  <li><a href="#">Recipients</a></li>
                  <li><a href="#">Preapproved Grants</a></li>
                  <li><a href="#">Pending Users</a></li>
                  <li><a href="#">Data Distributions</a></li>
              </ul>
            </div>
          </div>
            <div class="tab-content active">
              <table>
                <thead>
                  <tr>
                    <th >Name</th>
                    <th >Status</th>
                  </tr>
                </thead>
                <tbody>
                  <%= render partial: 'all_grants', collection: @grants, as: :grant %>
                </tbody>
              </table>
            </div>
            <div class="tab-content">
              <table>
                <thead>
                  <tr>
                    <th >Name</th>
                    <th >Email</th>
                  </tr>
                </thead>
                <tbody>
                  <%= render 'donated' %>
                  <%= render partial: 'users', collection: @donors, as: :user %>
                </tbody>
              </table>
            </div>
            <div class="tab-content">
              <table>
                <thead>
                  <tr>
                    <th >Name</th>
                    <th >Email</th>
                  </tr>
                </thead>
                <tbody>
                  <%= render 'school' %>
                  <%= render partial: 'users', collection: @recipients, as: :user %>
                </tbody>
              </table>
            </div>
            <div class="tab-content">
              <table>
                <thead>
                  <th >Name</tr>
                </thead>
                <tbody>
                  <%= render partial: 'preapproved_grants',
                             collection: @preapproved, as: :preapproved_grant %>
                </tbody>
              </table>
            </div>
            <div class="tab-content">
              <table>
                <thead>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Status</th>
                </thead>
                <tbody class='pending_users'>
                  <%= render partial: 'pending_users',
                             collection: @pending_users, as: :pending_user %>
              </table>
            </div>
            <div class="tab-content">
              <div class="row">
                <div class="five columns centalign">
                  <div style="margin-top:150px">Successful Crowdfunds&emsp;<div class="colorbox green">&nbsp;</div><br>Unsuccessful Crowdfunds&emsp;<div class="colorbox red">&nbsp;</div></div>
                </div>
                <div class="seven columns">
                  <canvas id="canvas" height="350" width="350"></canvas>
                </div>
              </div>
              <div class="row">
                <div class="five columns centalign">
                  <div style="margin-top:200px;">Accepted Grants&emsp;<div class="colorbox green">&nbsp;</div><br>Rejected Grants&emsp;<div class="colorbox red">&nbsp;</div></div>
                </div>
                <div class="seven columns">
                  <canvas id="canvas2" height="450" width="500"></canvas>
                </div>
              </div>
              <div class="row">
                <div class="five columns centalign">
                  <div style="margin-top:200px;">Accepted Grants&emsp;<div class="colorbox green">&nbsp;</div><br>Rejected Grants&emsp;<div class="colorbox red">&nbsp;</div></div>
                </div>
                <div class="seven columns">
                  <canvas id="canvas3" height="600" width="600"></canvas>
                </div>
              </div>
              <div class="row">
                <div class="five columns centalign">
                  <div style="margin-top:150px">Successful Crowdfunds&emsp;<div class="colorbox green">&nbsp;</div><br>Unsuccessful Crowdfunds&emsp;<div class="colorbox red">&nbsp;</div></div>
                </div>
                <div class="seven columns">
                  <canvas id="canvas4" height="450" width="500"></canvas>
                </div>
              </div>
            </div>
        </section>
      </div>
    </div>
  </div>
</div>

<script>

  var pieData = [
      {
        value: <%= (successful.length==0 && unsuccessful.length==0) ? 1 : successful.length %>,
        color:"#71c637"
      },
      {
        value : <%= (successful.length==0 && unsuccessful.length==0) ? 1 : unsuccessful.length %>,
        color : "#f14f4f"
      },
    ];

var myPie = new Chart(document.getElementById("canvas").getContext("2d")).Pie(pieData);

var data = {
  labels : <%= raw School.uniq.pluck(:name).to_json %>,
  datasets : [
    {
      fillColor : "#71c637",
      strokeColor : "#71c637",
      data : <%= raw accepted_school %>
    },
    {
      fillColor : "#f14f4f",
      strokeColor : "#f14f4f",
      data : <%= raw rejected_school %>
    }
  ]
}

var myChart = new Chart(document.getElementById("canvas2").getContext("2d")).Bar(data);

var data = {
  labels : <%= raw Grant::SUBJECTS.to_json %>,
  datasets : [
    {
      fillColor : "#71c637",
      strokeColor : "#71c637",
      data : <%= raw accepted_subject %>
    },
    {
      fillColor : "#f14f4f",
      strokeColor : "#f14f4f",
      data : <%= raw rejected_subject %>
    }
  ]
}

var myChart = new Chart(document.getElementById("canvas3").getContext("2d")).Bar(data);


var data = {
  labels : ["0-99","100-199","200-299","300-399","400-499","500-599","600-699","700-799","800-899","900-999","1000+"],
  datasets : [
    {
      fillColor : "#71c637",
      strokeColor : "#71c637",
      data : <%= raw successful_goal %>
    },
    {
      fillColor : "#f14f4f",
      strokeColor : "#f14f4f",
      data : <%= raw unsuccessful_goal %>
    }
  ]
}

var myChart = new Chart(document.getElementById("canvas4").getContext("2d")).Bar(data);

</script>
